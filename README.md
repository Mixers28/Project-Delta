# Project Delta — Card-Based Puzzle Game

A Unity C# project implementing a solitaire-style card game with pattern matching, scoring multipliers, and level goals.

## Quick Start

### Opening the Project
1. Clone the repository
2. Open in **Unity Editor 2022.3.62f3** or later
3. Open `Assets/Scenes/GameScene.unity`
4. Press **Play** to start the game

### Running Tests
Use the **Unity Test Runner** (Window → General → Test Runner):
- **Play Mode tests** — Run gameplay scenarios
- **Edit Mode tests** — Run pattern validation rules

See `.github/copilot-instructions.md` for detailed developer workflows and architecture guidance.

## Project Structure

```
Assets/
├── Scripts/
│   ├── Managers/
│   │   ├── GameManager.cs      (Singleton, orchestrates gameplay)
│   │   └── GameState.cs        (Game rules, events, player actions)
│   ├── Models/
│   │   ├── Card.cs             (Suit/Rank structure, display formatting)
│   │   ├── Deck.cs             (Draw/discard piles, shuffling)
│   │   └── Goal.cs             (Level objectives, progress tracking)
│   ├── Patterns/
│   │   ├── AllPatterns.cs      (IPattern interface, PatternValidator)
│   │   ├── FlushPattern.cs      (5 cards, same suit)
│   │   ├── FullHousePattern.cs  (5 cards, 3-of-a-kind + pair)
│   │   ├── PairPattern.cs       (2 cards, same rank)
│   │   ├── RunPattern.cs        (3/4/5+ cards in sequence)
│   │   └── ThreeOfKindPattern.cs (3 cards, same rank)
│   └── UI/
│       ├── ActionButtons.cs      (Draw/Play/Discard controls)
│       ├── CardDisplay.cs        (Individual card rendering)
│       ├── GameHUD.cs            (Score/moves/goals display)
│       ├── GameOverPanel.cs      (Win/lose screen)
│       └── HandDisplay.cs        (7-card hand management)
└── Tests/
    └── PatternTests.cs          (20+ unit tests)
```

## Game Mechanics

### Card Model
- **Deck:** 52 standard cards + 2 jokers (54 total)
- **Suits:** Hearts (♥), Diamonds (♦), Clubs (♣), Spades (♠), Joker (★)
- **Ranks:** Ace–King, plus Joker

### Patterns (Valid Plays)
- **Pair** (2 cards): Same rank or both jokers → **10 pts**
- **Three of a Kind** (3 cards): Same rank, jokers as wildcards → **30 pts**
- **Run** (3, 4, or 5+ cards): Same suit in sequence, jokers fill gaps → **40/80/150 pts**
- **Flush** (5 cards): All same suit → **100 pts**
- **Full House** (5 cards): 3-of-a-kind + pair, jokers as wildcards → **200 pts**

### Scoring Multipliers
- Joker in hand: ×1.5
- All non-jokers are face cards (J, Q, K): ×2
- All cards different suits: ×1.2 (if count equals unique suits)

### Level Goals
A level is won by completing all goals within the move limit. Goals track:
- Number of pairs, three-of-a-kinds, runs, flushes, full houses played
- Total score reached

### Gameplay Flow
1. Player draws from stock or discard pile
2. Player selects cards and plays a valid pattern
3. `PatternValidator` finds the best-scoring match
4. Score increases, goals update, events fire for UI refresh
5. Win/lose conditions checked each turn

## Developer Workflows

### Building
- **C# Project Files:** Auto-generated by Unity; excluded from git
- **Compile:** Open solution in Visual Studio or use Unity Editor

### Debugging
Add `Debug.Log` in:
- `GameManager.cs` for gameplay flow
- `GameState.cs` event handlers for state changes
- Pattern classes for validation logic
- Use `card.Display` for readable card output (e.g., "5♥", "★JKR")

### Adding Features

**Add a new pattern:**
1. Create `Assets/Scripts/Patterns/MyPattern.cs` implementing `IPattern`
2. Register in `PatternValidator()` constructor in `AllPatterns.cs`
3. Add unit tests in `Assets/Tests/PatternTests.cs`

**Add a new goal type:**
1. Add enum value to `Goal.GoalType`
2. Implement mapping in `Goal.MatchesPattern()` switch
3. Use in `GameManager.StartTestLevel()` when building level goals

**Adjust deck composition:**
1. Edit `Deck.Reset()` in `Assets/Scripts/Models/Deck.cs`
2. Currently builds 52 cards + 2 jokers, then Fisher-Yates shuffles

## Architecture Highlights

### Singleton Pattern
`GameManager.Instance` provides global access to:
- `CurrentGame` (GameState)
- `PatternValidator` (pattern detection)

### Event-Driven UI Updates
`GameState` fires public events that UI components subscribe to:
- `OnCardDrawn`, `OnCardDiscarded`
- `OnPatternPlayed`, `OnScoreChanged`
- `OnGoalUpdated`, `OnHandChanged`

### Pattern Validation
`PatternValidator.GetBestPattern(cards)` returns the highest-scoring valid match, considering:
- All 7 pattern types
- Joker wildcards
- Scoring multipliers

## Technology Stack
- **Engine:** Unity 2022.3.62f3
- **Language:** C# (.NET Standard 2.1)
- **Testing:** Unity Test Runner (Edit Mode + Play Mode)
- **VCS:** Git (GitHub)

## License & Attribution
See individual files for license headers. This project implements custom game rules inspired by solitaire variants.

## AI Agent Guidance
For AI coding assistants (Copilot, Claude, etc.), see `.github/copilot-instructions.md` for:
- Big picture architecture
- Project-specific conventions
- Common extension patterns
- Developer workflows
